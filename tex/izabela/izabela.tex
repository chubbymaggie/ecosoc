\documentclass[12pt]{article}

\usepackage{sbc-template}
\usepackage{graphicx,url}
\usepackage[applemac]{inputenc}
\usepackage[brazil]{babel}

\sloppy

\begin{document}

\title {Detecção Estática de Vulnerabilidades em Código Protegido por
Canários}

\author{Izabela}

\address{Departamento de Ci\^{e}ncia da Computa\c{c}\~{a}o --
UFMG\\
  Av. Ant\^{o}nio Carlos, 6627 -- 31.270-010 -- Belo Horizonte -- MG -- Brazil
  \email{\{izabela\}@dcc.ufmg.br}
}

\maketitle

\begin{abstract}
Add the abstract here.
\end{abstract}

\section{Introdução}
\label{sec:int}

% A brief description of canaries: basic principles, which compilers use them.
Canários são um dos mecanismos mais conhecidos para prevenir que usuários
maliciosos tomem controle de um sistema de computação.

% The problem with canaries: cite examples of different ways one can bypass
% them. Mention also that canaries are not exactly zero overhead: it is
% possible to build examples in which they have a non-negligible impact.
Ainda que canários mostrem-se um mecanismo bastante efetivo de segurança
computacional, eles não são a derradeira solução contra ataques de estouro de
arranjos.

% A more specific vulnerability: overwrite of local variables.
A proteção baseada em canários é particularmente ineficaz contra a sobre-escrita
de variáveis locais.
Tais variáveis são armazenadas no registro de ativação das funções.
Dependendo da maneira como o compilador dispõe dados em memória, é possível que
um arranjo passível de estouro de dados ocupe endereços inferiores a endereços
de algumas daquelas variáveis.
Essas variáveis podem, assim, ser modificadas por um adversário que seja capaz
de criar os dados que serão armazenados no arranjo.
Dois exemplos detalhados de tal vulnerabilidade são descritos na
seção~\ref{sec:bkg} do presente trabalho.

% The goals of the paper. Provide a brief description of the analysis
Este artigo descreve uma análise estática de código que encontra programas
que apresentam a vulnerabilidade descrita acima.
Nossa análise encontra funções que apresentam duas propriedades que, combinadas,
podem permitir que um adversário venha a comprometer o valor das variáveis locais
àquela função.
Essas duas vulnerabilidades são descritas a seguir:
\begin{enumerate}
\item A função declara, estaticamente, um arranjo que pode ser escrito com
dados provenientes de uma entrada a qual o adversário possui acesso.
\item A função contém variáveis locais que o compilador aloca em regiões
posteriores àquela em que o arranjo vulnerável está alocado.
\end{enumerate}

% What we have done:
A análise que propomos neste trabalho foi implementada no compilador LLVM.
LLVM é um compilador de C e C++ de qualidade industrial, atrás somente de
\texttt{gcc} em número de usuários e mantenedores.
A fim de validar nossa proposta, fomos capazes de analisar um conjunto de
mais de 440 programas bem conhecidos.
Dentre esses programas, contamos os 12 benchmarks que fazem parte de
SPEC CPU 2006.
Tais programas nos provêem uma massa de dados com mais de 2.3 milhões de
linha de código C.
Nossa análise mostra-se bastante efetiva: ela nos apontou XX avisos,
das quais XX mostraram-se vulnerabilidades reais.
Além disso, a nossa implementação é consideravelmente rápida: somos capazes de
analisar o código fonte de \texttt{gcc} inteiro -- mais de XX milhões de
instruções assembly -- em menos de XX segundos.
A nossa ferramenta, mais um tutorial sobre como usá-la, estão disponíveis
publicamente.

\section{Exemplo de Ataque a Código Protegido por Canários}
\label{sec:bkg}

A figure~\ref{fig:bad_deposit} mostra um exemplo em que um usuário malicioso
poderia sobre-escrever uma informação sigilosa do programa.
Nesse caso particular, o adversário está interessado em modificar o valor da
variável \texttt{deposit}, que, neste exemplo hipotético, representa uma
quantidade de dinheiro a ser transferida para a conta de um cliente.
Ao fornecer uma senha incorreta, o adversário garante que o teste na linha
cinco do exemplo não será verdadeiro.
Por outro lado, essa mesma senha contém dados suficientes para sobre-escrever
o conteúdo de \texttt{deposit}.
Tal sobre-escrita ocorre por que essa variável -- \texttt{deposit} -- foi
declarada logo após o arranjo \texttt{passwd\_tmp}, usado para fazer a validação
da senha.
Vários compiladores de qualidade industrial respeitam a ordem de declaração de
variáveis ao alocá-las em memória.
Caso a variável \texttt{deposit} houvesse sido alocada antes do arranjo
\texttt{passwd\_tmp}, o ataque teria sido impossível.

\begin{figure}[htb]
\begin{center}
\includegraphics[width=0.9\columnwidth]{images/bad_deposit}
\caption{Um exemplo em que um adversário é capaz de sobre-escrever informação
confidencial via estouro de arranjo.}
\label{fig:bad_deposit}
\end{center}
\end{figure}

A figure~\ref{fig:bad_func_pointer} mostra outro exemplo de software que,
embora protegido por canários, é vulnerável a ataques de estouro de limite de
arranjos.
Nesse exemplo, um adversário pode desviar um ponteiro para função, fazendo com
que ele aponte para uma das rotinas de sistema.
Como o ponteiro de função sobre-escrito, \texttt{hamming}, possui a mesma
assinatura que a função \texttt{telnet}, disponível na biblioteca padrão
C (\texttt{libc}), este é o alvo do ataque.
De posse do endereço dessa função, o adversário pode criar uma string grande
o suficiente para preencher o arranjo comprometido -- \texttt{tmp} nesse
exemplo -- contendo, ao final, o endereço da função a ser capturada.
Quando o ponteiro \texttt{hamming} for dereferenciado, o fluxo de execução
do programa será desviado para uma chamada de sistema, a qual proverá ao
usuário malicioso um terminal com os mesmos privilégios do programa
atacado.

\begin{figure}[htb]
\begin{center}
\includegraphics[width=0.9\columnwidth]{images/bad_func_pointer}
\caption{Outro exemplo de código vulnerável, mesmo com canários: o adversário
pode tomar controle do sistema sobre-escrevendo um ponteiro de função.}
\label{fig:bad_func_pointer}
\end{center}
\end{figure}

\section{Detecção Estática de Código Vulnerável}
\label{sec:int}

\section{Resultados Experimentais}
\label{sec:exp}

\section{Trabalhos Relacionados}
\label{sec:rel}

\section{Conclusões e Observações Finais}
\label{sec:con}

\end{document}